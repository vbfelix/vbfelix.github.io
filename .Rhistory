plt_water_mark(vfx_watermark)+
NULL
b <- rep(10,5)
df <-
tibble(x = cumprod(b)) %>%
mutate(
y = log(x,base = 10),
x2 = lead(x),
y2 = lead(y)
)
df %>%
ggplot(aes(x,y))+
scale_x_log10(
breaks = df$x,expand = c(0.02,0),
labels = df$x %>% format_num(0))+
scale_y_continuous(breaks = 1:5,limits = c(1,5),expand = c(0.02,0))+
plt_theme_xy(14,margin = .45)+
theme(panel.grid.minor = element_blank())+
labs(
y = expression(paste(log[10],"(x)")),
caption = "Source: @vbfelix.",
x = "x"
)+
plt_flip_y_title+
geom_segment(aes(x = min(x), xend = x, y = y, yend = y),linetype = "dashed")+
geom_segment(aes(x = x, xend = x, y = min(y), yend = y),linetype = "dashed")+
geom_point(size = 4)+
geom_curve(aes(xend = x2-.25, yend = 1,y = 1),
curvature = -.5,
col = "firebrick3",
arrow = arrow(length = unit(.25,"cm")))+
geom_curve(aes(yend = y2-.025, xend = 10,x = 10),
curvature = .5,
col = "royalblue4",
arrow = arrow(length = unit(.25,"cm")))+
geom_text(aes(y = 1.45, x = ((x2+x)/2) , label = "x10"),
fontface = "bold",
col = "firebrick3",
size = 5)+
geom_text(aes(x = 21, y = .9*lead(y) , label = "+1"),
fontface = "bold",
col = "royalblue4",
size = 5)+
theme(
axis.text.x = element_text(colour  = "firebrick3",face = "bold"),
axis.title.x = element_text(colour  = "firebrick3",face = "bold"),
axis.ticks.x = element_line(colour  = "firebrick3"),
axis.text.y = element_text(colour  = "royalblue4",face = "bold"),
axis.title.y = element_text(colour  = "royalblue4",face = "bold"),
axis.ticks.y = element_line(colour  = "royalblue4")
)+
plt_water_mark(vfx_watermark)+
NULL
b <- rep(10,5)
df <-
tibble(x = cumprod(b)) %>%
mutate(
y = log(x,base = 10),
x2 = lead(x),
y2 = lead(y)
)
df %>%
ggplot(aes(x,y))+
scale_x_log10(
breaks = df$x,expand = c(0.02,0),
labels = df$x %>% format_num(0))+
scale_y_continuous(breaks = 1:5,limits = c(1,5),expand = c(0.02,0))+
plt_theme_xy(14,margin = .45)+
theme(panel.grid.minor = element_blank())+
labs(
y = expression(paste(log[10],"(x)")),
caption = "Source: @vbfelix.",
x = "x"
)+
plt_flip_y_title+
geom_segment(aes(x = min(x), xend = x, y = y, yend = y),linetype = "dashed")+
geom_segment(aes(x = x, xend = x, y = min(y), yend = y),linetype = "dashed")+
geom_point(size = 4)+
geom_curve(aes(xend = x2-.25, yend = 1,y = 1),
curvature = -.5,
col = "firebrick3",
arrow = arrow(length = unit(.25,"cm")))+
geom_curve(aes(yend = y2-.025, xend = 10,x = 10),
curvature = .5,
col = "royalblue4",
arrow = arrow(length = unit(.25,"cm")))+
geom_text(aes(y = 1.45, x = ((x2+x)/2) , label = "x10"),
fontface = "bold",
col = "firebrick3",
size = 5)+
geom_text(aes(x = 21, y = .95*lead(y) , label = "+1"),
fontface = "bold",
col = "royalblue4",
size = 5)+
theme(
axis.text.x = element_text(colour  = "firebrick3",face = "bold"),
axis.title.x = element_text(colour  = "firebrick3",face = "bold"),
axis.ticks.x = element_line(colour  = "firebrick3"),
axis.text.y = element_text(colour  = "royalblue4",face = "bold"),
axis.title.y = element_text(colour  = "royalblue4",face = "bold"),
axis.ticks.y = element_line(colour  = "royalblue4")
)+
plt_water_mark(vfx_watermark)+
NULL
b <- rep(10,5)
df <-
tibble(x = cumprod(b)) %>%
mutate(
y = log(x,base = 10),
x2 = lead(x),
y2 = lead(y)
)
df %>%
ggplot(aes(x,y))+
scale_x_log10(
breaks = df$x,expand = c(0.02,0),
labels = df$x %>% format_num(0))+
scale_y_continuous(breaks = 1:5,limits = c(1,5),expand = c(0.02,0))+
plt_theme_xy(14,margin = .45)+
theme(panel.grid.minor = element_blank())+
labs(
y = expression(paste(log[10],"(x)")),
caption = "Source: @vbfelix.",
x = "x"
)+
plt_flip_y_title+
geom_segment(aes(x = min(x), xend = x, y = y, yend = y),linetype = "dashed")+
geom_segment(aes(x = x, xend = x, y = min(y), yend = y),linetype = "dashed")+
geom_point(size = 4)+
geom_curve(aes(xend = x2-.25, yend = 1,y = 1),
curvature = -.5,
col = "firebrick3",
arrow = arrow(length = unit(.25,"cm")))+
geom_curve(aes(yend = y2-.025, xend = 10,x = 10),
curvature = .5,
col = "royalblue4",
arrow = arrow(length = unit(.25,"cm")))+
geom_text(aes(y = 1.45, x = ((x2+x)/2) , label = "x10"),
fontface = "bold",
col = "firebrick3",
size = 5)+
geom_text(aes(x = 20, y = .92*lead(y) , label = "+1"),
fontface = "bold",
col = "royalblue4",
size = 5)+
theme(
axis.text.x = element_text(colour  = "firebrick3",face = "bold"),
axis.title.x = element_text(colour  = "firebrick3",face = "bold"),
axis.ticks.x = element_line(colour  = "firebrick3"),
axis.text.y = element_text(colour  = "royalblue4",face = "bold"),
axis.title.y = element_text(colour  = "royalblue4",face = "bold"),
axis.ticks.y = element_line(colour  = "royalblue4")
)+
plt_water_mark(vfx_watermark)+
NULL
b <- rep(10,5)
df <-
tibble(x = cumprod(b)) %>%
mutate(
y = log(x,base = 10),
x2 = lead(x),
y2 = lead(y)
)
df %>%
ggplot(aes(x,y))+
scale_x_log10(
breaks = df$x,expand = c(0.02,0),
labels = df$x %>% format_num(0))+
scale_y_continuous(breaks = 1:5,limits = c(1,5),expand = c(0.02,0))+
plt_theme_xy(14,margin = .45)+
theme(panel.grid.minor = element_blank())+
labs(
y = expression(paste(log[10],"(x)")),
caption = "Source: @vbfelix.",
x = "x"
)+
plt_flip_y_title+
geom_segment(aes(x = min(x), xend = x, y = y, yend = y),linetype = "dashed")+
geom_segment(aes(x = x, xend = x, y = min(y), yend = y),linetype = "dashed")+
geom_point(size = 4)+
geom_curve(aes(xend = x2-.25, yend = 1,y = 1),
curvature = -.5,
col = "firebrick3",
arrow = arrow(length = unit(.25,"cm")))+
geom_curve(aes(yend = y2-.025, xend = 10,x = 10),
curvature = .5,
col = "royalblue4",
arrow = arrow(length = unit(.25,"cm")))+
geom_text(aes(y = 1.45, x = ((x2+x)/2) , label = "x10"),
fontface = "bold",
col = "firebrick3",
size = 5)+
geom_text(aes(x = 15, y = .92*lead(y) , label = "+1"),
fontface = "bold",
col = "royalblue4",
size = 5)+
theme(
axis.text.x = element_text(colour  = "firebrick3",face = "bold"),
axis.title.x = element_text(colour  = "firebrick3",face = "bold"),
axis.ticks.x = element_line(colour  = "firebrick3"),
axis.text.y = element_text(colour  = "royalblue4",face = "bold"),
axis.title.y = element_text(colour  = "royalblue4",face = "bold"),
axis.ticks.y = element_line(colour  = "royalblue4")
)+
plt_water_mark(vfx_watermark)+
NULL
b <- rep(10,5)
df <-
tibble(x = cumprod(b)) %>%
mutate(
y = log(x,base = 10),
x2 = lead(x),
y2 = lead(y)
)
df %>%
ggplot(aes(x,y))+
scale_x_log10(
breaks = df$x,expand = c(0.02,0),
labels = df$x %>% format_num(0))+
scale_y_continuous(breaks = 1:5,limits = c(1,5),expand = c(0.02,0))+
plt_theme_xy(14,margin = .45)+
theme(panel.grid.minor = element_blank())+
labs(
y = expression(paste(log[10],"(x)")),
caption = "Source: @vbfelix.",
x = "x"
)+
plt_flip_y_title+
geom_segment(aes(x = min(x), xend = x, y = y, yend = y),linetype = "dashed")+
geom_segment(aes(x = x, xend = x, y = min(y), yend = y),linetype = "dashed")+
geom_point(size = 4)+
geom_curve(aes(xend = x2-.25, yend = 1,y = 1),
curvature = -.5,
col = "firebrick3",
arrow = arrow(length = unit(.25,"cm")))+
geom_curve(aes(yend = y2-.025, xend = 10,x = 10),
curvature = .5,
col = "royalblue4",
arrow = arrow(length = unit(.25,"cm")))+
geom_text(aes(y = 1.45, x = ((x2+x)/2) , label = "x10"),
fontface = "bold",
col = "firebrick3",
size = 5)+
geom_text(aes(x = 17, y = .92*lead(y) , label = "+1"),
fontface = "bold",
col = "royalblue4",
size = 5)+
theme(
axis.text.x = element_text(colour  = "firebrick3",face = "bold"),
axis.title.x = element_text(colour  = "firebrick3",face = "bold"),
axis.ticks.x = element_line(colour  = "firebrick3"),
axis.text.y = element_text(colour  = "royalblue4",face = "bold"),
axis.title.y = element_text(colour  = "royalblue4",face = "bold"),
axis.ticks.y = element_line(colour  = "royalblue4")
)+
plt_water_mark(vfx_watermark)+
NULL
df <-
COVID19::covid19(verbose = FALSE,
country = c("BRA","ARG","USA"),
level = 1,
start = "2020-01-01",
end = "2020-12-31"
) %>%
as_tibble() %>%
select(date,deaths, country = iso_alpha_3)
plt_base <-
df %>%
ggplot(aes(date,deaths))+
geom_line(aes(col = country), size = 1)+
plt_theme_y()+
plt_water_mark(vfx_watermark)+
scale_x_date(date_breaks = "1 month",date_labels = "%m", expand = c(0,0))+
labs(
x = "Month",
title = "Cumulative number of deaths in 2020 by COVID-19.",
caption = "Source: COVID-19 Data Hub.",
y = "",
col = "Country:"
)+
scale_color_manual(values = c("steelblue1","springgreen4","red"))
max_value <- 350000
lin_scale <- seq(0,max_value,50000)
log_scale <- c(max_value / c(1,cumprod(rep(10,4))),1)
plt_base +
scale_y_continuous(expand = c(.05,0), breaks = lin_scale,
labels = format_num(lin_scale,0), limits = range(lin_scale))
plt_base +
scale_y_log10(expand = c(.05,0), breaks = log_scale,
labels = format_num(log_scale,0))+
labs(subtitle = expression(paste(log[10]," scale")))
df
df %>%
mutate(
log(deaths)
)
df %>%
mutate(
log(deaths,base = 10)
)
df %>%
mutate(
ldeath = log(deaths,base = 10)
)
df %>%
mutate(ldeath = log(deaths,base = 10)) %>%
group_by(country) %>%
summarise(min(ldeath,na.rm = T))
df %>%
mutate(ldeath = log(deaths,base = 10)) %>%
group_by(country) %>%
filter(ldeath == min(ldeath,na.rm = T))
df <-
COVID19::covid19(verbose = FALSE,
country = c("BRA","ARG","USA"),
level = 1,
start = "2020-01-01",
end = "2020-12-31"
) %>%
as_tibble() %>%
select(date,deaths, country = iso_alpha_3) %>%
mutate(death = death + .00001)
df <-
COVID19::covid19(verbose = FALSE,
country = c("BRA","ARG","USA"),
level = 1,
start = "2020-01-01",
end = "2020-12-31"
) %>%
as_tibble() %>%
select(date,deaths, country = iso_alpha_3) %>%
mutate(deaths = deaths + .00001)
plt_base <-
df %>%
ggplot(aes(date,deaths))+
geom_line(aes(col = country), size = 1)+
plt_theme_y()+
plt_water_mark(vfx_watermark)+
scale_x_date(date_breaks = "1 month",date_labels = "%m", expand = c(0,0))+
labs(
x = "Month",
title = "Cumulative number of deaths in 2020 by COVID-19.",
caption = "Source: COVID-19 Data Hub.",
y = "",
col = "Country:"
)+
scale_color_manual(values = c("steelblue1","springgreen4","red"))
max_value <- 350000
lin_scale <- seq(0,max_value,50000)
log_scale <- c(max_value / c(1,cumprod(rep(10,4))),0)
plt_base +
scale_y_continuous(expand = c(.05,0), breaks = lin_scale,
labels = format_num(lin_scale,0), limits = range(lin_scale))
plt_base +
scale_y_log10(expand = c(.05,0), breaks = log_scale,
labels = format_num(log_scale,0))+
labs(subtitle = expression(paste(log[10]," scale")))
df <-
COVID19::covid19(verbose = FALSE,
country = c("BRA","ARG","USA"),
level = 1,
start = "2020-01-01",
end = "2020-12-31"
) %>%
as_tibble() %>%
select(date,deaths, country = iso_alpha_3) %>%
filter(death > 0)
df <-
COVID19::covid19(verbose = FALSE,
country = c("BRA","ARG","USA"),
level = 1,
start = "2020-01-01",
end = "2020-12-31"
) %>%
as_tibble() %>%
select(date,deaths, country = iso_alpha_3) %>%
filter(deaths > 0)
plt_base <-
df %>%
ggplot(aes(date,deaths))+
geom_line(aes(col = country), size = 1)+
plt_theme_y()+
plt_water_mark(vfx_watermark)+
scale_x_date(date_breaks = "1 month",date_labels = "%m", expand = c(0,0))+
labs(
x = "Month",
title = "Cumulative number of deaths in 2020 by COVID-19.",
caption = "Source: COVID-19 Data Hub.",
y = "",
col = "Country:"
)+
scale_color_manual(values = c("steelblue1","springgreen4","red"))
max_value <- 350000
lin_scale <- seq(0,max_value,50000)
log_scale <- c(max_value / c(1,cumprod(rep(10,4))),0)
plt_base +
scale_y_continuous(expand = c(.05,0), breaks = lin_scale,
labels = format_num(lin_scale,0), limits = range(lin_scale))
plt_base +
scale_y_log10(expand = c(.05,0), breaks = log_scale,
labels = format_num(log_scale,0))+
labs(subtitle = expression(paste(log[10]," scale")))
source("~/.active-rstudio-document", echo=TRUE)
mydata
library(dplyr)
library(ggplot2)
library(relper)
mydata %>%
ggplot(aes(Poids))
mydata %>%
ggplot(aes(x = Poids))
mydata %>%
ggplot(aes(x = Poids))+geom_boxplot()
mydata %>%
ggplot(aes(x = Poids))+
geom_boxplot()+
geom_text(
data = mydata %>% filter(Poids %in% c(10,98,120)),
mapping = aes(label = ID)
)
mydata %>%
ggplot(aes(x = Poids))+
geom_boxplot()+
geom_text(
data = mydata %>% filter(Poids %in% c(10,98,120)),
mapping = aes(y = 1,label = ID)
)
mydata %>%
ggplot(aes(x = Poids))+
geom_boxplot()+
geom_text(
data = mydata %>% filter(Poids %in% c(10,98,120)),
mapping = aes(y = 0,label = ID)
)
mydata %>%
ggplot(aes(x = Poids))+
geom_boxplot()+
geom_text(
data = mydata %>% filter(Poids %in% c(10,98,120)),
mapping = aes(y = 0,label = ID),nudge_y = .5
)
mydata %>%
ggplot(aes(x = Poids))+
geom_boxplot()+
geom_text(
data = mydata %>% filter(Poids %in% c(10,98,120)),
mapping = aes(y = 0,label = ID),
nudge_y = .1
)
mydata %>%
ggplot(aes(x = Poids))+
geom_boxplot()+
geom_text(
data = mydata %>% filter(Poids %in% c(10,98,120)),
mapping = aes(y = 0,label = ID),
nudge_y = .05
)
mydata %>% filter(Poids %in% c(10,98,120))
source("~/.active-rstudio-document", echo=TRUE)
df
df %>%
mutate(pmin(CURR_PR))
df %>%
mutate(first(min(CURR_PR)))
df %>%
group_by(CURR_PR) %>%
mutate(first(min(CURR_PR)))
df %>%
group_by(CURR_PR) %>%
mutate(which(min(CURR_PR)))
df %>%
group_by(CURR_PR) %>%
mutate(which(first(CURR_PR)))
?first
df %>%
group_by(CURR_PR) %>%
mutate(first(CURR_PR))
df %>%
# group_by(CURR_PR) %>%
mutate(row_number_unique(CURR_PR))
df %>%
group_by(CURR_PR) %>%
mutate(row_number_unique(CURR_PR))
df %>%
group_by(CURR_PR) %>%
mutate(row_number_unique())
relper::
?row_number_unique
row_number_unique(mtcars$gear)
df %>%
group_by(CURR_PR) %>%
mutate(row_number)
df %>%
group_by(CURR_PR) %>%
mutate(row_number())
df %>%
group_by(CURR_PR) %>%
mutate(aux = row_number())
Poids <- c(round(rnorm(100,65,10),1),10,120,98)
ID <- c(paste("A",1:26,sep = ""),paste("B",1:26,sep = ""),paste("C",1:26,sep = ""),
paste("D",1:26,sep = ""))
mydata <- data.frame(ID=ID,Poids=Poids)
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
mydata %>%
ggplot(aes(x = Poids))+
geom_boxplot()+
geom_text(
data = mydata %>% filter(is_outlier(Poids)),
mapping = aes(y = 0,label = ID),
nudge_y = .05
)
