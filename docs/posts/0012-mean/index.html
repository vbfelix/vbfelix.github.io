<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vinícius Félix">
<meta name="dcterms.date" content="2023-08-13">

<title>vbfelix - An intro to Mean</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../..//images/favicon/favicon-32x32.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">vbfelix</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../header-about.html">
 <span class="menu-text">About me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../header-publications.html">
 <span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../header-certifications.html">
 <span class="menu-text">Certifications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../header-participations.html">
 <span class="menu-text">Participations</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/vbfelix"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/vin%C3%ADcius-f%C3%A9lix-962010140/"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://stackoverflow.com/users/9696037/vin%c3%adcius-f%c3%a9lix"><i class="bi bi-stack-overflow" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://vbfelix.github.io/relper"><i class="bi bi-box-seam" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">An intro to Mean</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Intro to</div>
                <div class="quarto-category">Theory</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Vinícius Félix </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 13, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-meme-that-everyone-gets" id="toc-the-meme-that-everyone-gets" class="nav-link active" data-scroll-target="#the-meme-that-everyone-gets"><strong>The Meme That Everyone Gets</strong></a>
  <ul class="collapse">
  <li><a href="#the-simple" id="toc-the-simple" class="nav-link" data-scroll-target="#the-simple">The simple</a>
  <ul class="collapse">
  <li><a href="#ex.-1-small-but-savage" id="toc-ex.-1-small-but-savage" class="nav-link" data-scroll-target="#ex.-1-small-but-savage"><strong>Ex. 1:</strong> Small but savage</a></li>
  <li><a href="#ex.-2-when-numbers-go-big" id="toc-ex.-2-when-numbers-go-big" class="nav-link" data-scroll-target="#ex.-2-when-numbers-go-big"><strong>Ex. 2:</strong> When numbers go big</a></li>
  <li><a href="#ex.-3-may-not-reflect-true-center" id="toc-ex.-3-may-not-reflect-true-center" class="nav-link" data-scroll-target="#ex.-3-may-not-reflect-true-center"><strong>Ex. 3:</strong> May not reflect true center</a></li>
  <li><a href="#ex.-4-zero-gravity-when-means-gets-lost-in-space" id="toc-ex.-4-zero-gravity-when-means-gets-lost-in-space" class="nav-link" data-scroll-target="#ex.-4-zero-gravity-when-means-gets-lost-in-space"><strong>Ex. 4:</strong> Zero gravity, when means gets lost in space</a></li>
  <li><a href="#ex.-5-a-tale-of-average-and-variance" id="toc-ex.-5-a-tale-of-average-and-variance" class="nav-link" data-scroll-target="#ex.-5-a-tale-of-average-and-variance"><strong>Ex. 5:</strong> A tale of average and variance</a></li>
  </ul></li>
  <li><a href="#the-weighted" id="toc-the-weighted" class="nav-link" data-scroll-target="#the-weighted">The weighted</a></li>
  <li><a href="#the-trimmed" id="toc-the-trimmed" class="nav-link" data-scroll-target="#the-trimmed">The trimmed</a></li>
  </ul></li>
  <li><a href="#when-averages-go-proportional" id="toc-when-averages-go-proportional" class="nav-link" data-scroll-target="#when-averages-go-proportional"><strong>When Averages Go Proportional</strong></a>
  <ul class="collapse">
  <li><a href="#ex.-1-small-but-savage-1" id="toc-ex.-1-small-but-savage-1" class="nav-link" data-scroll-target="#ex.-1-small-but-savage-1"><strong>Ex. 1:</strong> Small but savage</a></li>
  <li><a href="#ex.-2-when-numbers-go-big-1" id="toc-ex.-2-when-numbers-go-big-1" class="nav-link" data-scroll-target="#ex.-2-when-numbers-go-big-1"><strong>Ex. 2:</strong> When numbers go big</a></li>
  <li><a href="#ex.-3-may-not-reflect-true-center-1" id="toc-ex.-3-may-not-reflect-true-center-1" class="nav-link" data-scroll-target="#ex.-3-may-not-reflect-true-center-1"><strong>Ex. 3:</strong> May not reflect true center</a></li>
  <li><a href="#ex.-4-zero-gravity-when-means-gets-lost-in-space-1" id="toc-ex.-4-zero-gravity-when-means-gets-lost-in-space-1" class="nav-link" data-scroll-target="#ex.-4-zero-gravity-when-means-gets-lost-in-space-1"><strong>Ex. 4:</strong> Zero gravity, when means gets lost in space</a></li>
  <li><a href="#ex.-5-a-tale-of-average-and-variance-1" id="toc-ex.-5-a-tale-of-average-and-variance-1" class="nav-link" data-scroll-target="#ex.-5-a-tale-of-average-and-variance-1"><strong>Ex. 5:</strong> A Tale of average and variance</a></li>
  </ul></li>
  <li><a href="#the-odd-one-out-in-the-mean-squad" id="toc-the-odd-one-out-in-the-mean-squad" class="nav-link" data-scroll-target="#the-odd-one-out-in-the-mean-squad"><strong>The Odd One Out in the Mean Squad</strong></a>
  <ul class="collapse">
  <li><a href="#ex.-1-small-but-savage-2" id="toc-ex.-1-small-but-savage-2" class="nav-link" data-scroll-target="#ex.-1-small-but-savage-2"><strong>Ex. 1:</strong> Small but savage</a></li>
  <li><a href="#ex.-2-when-numbers-go-big-2" id="toc-ex.-2-when-numbers-go-big-2" class="nav-link" data-scroll-target="#ex.-2-when-numbers-go-big-2"><strong>Ex. 2:</strong> When numbers go big</a></li>
  <li><a href="#ex.-3-may-not-reflect-true-center-2" id="toc-ex.-3-may-not-reflect-true-center-2" class="nav-link" data-scroll-target="#ex.-3-may-not-reflect-true-center-2"><strong>Ex. 3:</strong> May not reflect true center</a></li>
  <li><a href="#ex.-4-zero-gravity-when-means-gets-lost-in-space-2" id="toc-ex.-4-zero-gravity-when-means-gets-lost-in-space-2" class="nav-link" data-scroll-target="#ex.-4-zero-gravity-when-means-gets-lost-in-space-2"><strong>Ex. 4:</strong> Zero gravity, when means gets lost in space</a></li>
  <li><a href="#ex.-5-a-tale-of-average-and-variance-2" id="toc-ex.-5-a-tale-of-average-and-variance-2" class="nav-link" data-scroll-target="#ex.-5-a-tale-of-average-and-variance-2"><strong>Ex. 5:</strong> A tale of average and variance</a></li>
  </ul></li>
  <li><a href="#time-travelers-guide" id="toc-time-travelers-guide" class="nav-link" data-scroll-target="#time-travelers-guide"><strong>Time Travelers’ Guide</strong></a></li>
  <li><a href="#how-to-apply-in-r" id="toc-how-to-apply-in-r" class="nav-link" data-scroll-target="#how-to-apply-in-r">How to apply in R</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<div class="cell">

</div>
<div class="cell">

</div>
<p>In this post of the series <strong>Intro to</strong>, I’ll navigate the Land of the Averages<strong>.</strong></p>
<section id="the-meme-that-everyone-gets" class="level1">
<h1><strong>The Meme That Everyone Gets</strong></h1>
<p>The arithmetic mean, also known as “<em>the</em> <em>mean</em>,” is a fundamental concept in statistics that represents the average value of a set of numbers. It is widely used to summarize data in a variety of fields.</p>
<p>To calculate it, add up all of the numbers in a dataset and divide by the total count, yielding a central value that evenly distributes the data points on a number line.</p>
<section id="the-simple" class="level2">
<h2 class="anchored" data-anchor-id="the-simple">The simple</h2>
<p>The simple arithmetic mean, is given by: <span id="eq-arithmetic"><span class="math display">\[
\frac{1}{n}\sum_\limits{i=1}^{n} x_i,
\tag{1}\]</span></span></p>
<p>where:</p>
<ul>
<li><span class="math inline">\(x_i\)</span> is a numeric vector of length <span class="math inline">\(n\)</span>.</li>
</ul>
<p>Because the arithmetic mean is simple to calculate and understand, it is accessible to a wide range of audiences, since it just entails the fundamental arithmetic operations of addition and division.</p>
<p>People frequently employ the concept, even if they do not formally comprehend it. In my classes, I used to ask how long it usually takes you to get to work. Then someone said they’d take 30 minutes, for example, and I asked if that meant every day would be exactly 30 minutes, and my students said no, that some times would be 30, 31 or 29 minutes, so intuitively they’d do the simple arithmetic mean.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 2 2 3 3 3 4 5 5 5 7</code></pre>
</div>
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:right;"> arithmetic </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 3.636364 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>So the simple arithmetic mean is 3.636364, now let’s see how outliers impact.</p>
<section id="ex.-1-small-but-savage" class="level3">
<h3 class="anchored" data-anchor-id="ex.-1-small-but-savage"><strong>Ex. 1:</strong> Small but savage</h3>
<p>In this example, we change the first value to a smaller fractional value.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.1 2.0 2.0 3.0 3.0 3.0 4.0 5.0 5.0 5.0 7.0</code></pre>
</div>
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:right;"> arithmetic </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 3.554546 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>We can see that the mean has shifted slightly to a smaller value.</p>
</section>
<section id="ex.-2-when-numbers-go-big" class="level3">
<h3 class="anchored" data-anchor-id="ex.-2-when-numbers-go-big"><strong>Ex. 2:</strong> When numbers go big</h3>
<p>The arithmetic mean can be significantly influenced by extreme values. A single value that is unusually high or low can skew the result, resulting in an inaccurate representation of the central tendency. Extreme values in small samples can have a greater impact on the mean than extreme values in large samples.</p>
<p>Now we change the last value to a larger value.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> [1]   1   2   2   3   3   3   4   5   5   5 100</code></pre>
</div>
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:right;"> arithmetic </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 12.09091 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>As we can see, the mean increases significantly, resulting in a distorted and unrepresentative metric of the data.</p>
</section>
<section id="ex.-3-may-not-reflect-true-center" class="level3">
<h3 class="anchored" data-anchor-id="ex.-3-may-not-reflect-true-center"><strong>Ex. 3:</strong> May not reflect true center</h3>
<p>In skewed distributions, the mean may not accurately represent the typical value experienced by the majority of data points. The mean can be pushed towards the distribution’s tail.</p>
<p>Let’s take a look at an example from a dataset from a exponential distribution.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>As we can see, the mean is dragged far away from the peak density value by the larger values.</p>
</section>
<section id="ex.-4-zero-gravity-when-means-gets-lost-in-space" class="level3">
<h3 class="anchored" data-anchor-id="ex.-4-zero-gravity-when-means-gets-lost-in-space"><strong>Ex. 4:</strong> Zero gravity, when means gets lost in space</h3>
<p>Next we apply the mean to data from a normal distribution centered around zero.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Because the arithmetic mean uses sum as the base for calculation, a simmetric distribution around negative and positive values will produce a mean close to or equal to zero, which can be misleading, especially when dealing with an error variable, because the mean can be interpreted as having no error at all, which is why the absolute function is commonly used in this scenario.</p>
</section>
<section id="ex.-5-a-tale-of-average-and-variance" class="level3">
<h3 class="anchored" data-anchor-id="ex.-5-a-tale-of-average-and-variance"><strong>Ex. 5:</strong> A tale of average and variance</h3>
<p>Let’s run the normal distribution simulation again, but with different variances this time.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can see that even though the distribution for each data set is very different, we would be in trouble if we only based our decision on the mean.</p>
</section>
</section>
<section id="the-weighted" class="level2">
<h2 class="anchored" data-anchor-id="the-weighted">The weighted</h2>
<p>The weighted arithmetic mean is a variant that considers not only the values in a dataset but also assigns different weights to each value based on its importance or significance.</p>
<p>In other words, rather than treating all values equally, the weighted mean favors some over others based on predetermined weights.</p>
<p><span id="eq-weighted"><span class="math display">\[
\frac{1}{\sum_\limits{i=1}^{n}w_i}\sum_\limits{i=1}^{n} w_ix_i,
\tag{2}\]</span></span></p>
<p>where:</p>
<ul>
<li><p><span class="math inline">\(x_i\)</span> is a numeric vector of length <span class="math inline">\(n\)</span>;</p></li>
<li><p><span class="math inline">\(w_i\)</span> is a numeric vector of length <span class="math inline">\(n\)</span>, with the respectives weights for the values of <span class="math inline">\(x_i\)</span>.</p></li>
</ul>
<p>A practical application is in academic grading, the weighted mean of exam scores might be used, where different exams carry different weights based on their importance.</p>
<p>A common case is when proportion (<span class="math inline">\(p_i\)</span>) are used as weigths, and since:</p>
<p><span id="eq-proportion-sum"><span class="math display">\[
\sum_\limits{i=1}^{n} p_i = 1.
\tag{3}\]</span></span></p>
<p>When applying <a href="#eq-proportion-sum">Equation&nbsp;3</a> to <a href="#eq-weighted">Equation&nbsp;2</a> we have that:</p>
<p><span id="eq-weighted-proportion"><span class="math display">\[
\sum_\limits{i=1}^{n} w_ix_i.
\tag{4}\]</span></span> Even if it is an interesting application, assigning weights to data points is frequently subjective and can be influenced by personal judgment or assumptions. The weighted mean’s accuracy is heavily dependent on the appropriateness of the weights chosen.</p>
<p>In addition, calculating the weighted mean requires an extra step when compared to the simple arithmetic mean, which may complicate the analysis and calculations, particularly when dealing with large datasets. In some cases, the rationale for assigning specific weights may not be transparent or well-documented, which can make replicating or validating the analysis difficult.</p>
</section>
<section id="the-trimmed" class="level2">
<h2 class="anchored" data-anchor-id="the-trimmed">The trimmed</h2>
<p>A trimmed arithmetic mean is a statistical measure that computes the mean of a dataset by excluding a percentage of the lowest and highest values, reducing the impact of outliers and extreme values.</p>
<p>The amount of trimming can be adjusted to strike a balance between retaining meaningful data and reducing the impact of outliers.</p>
<p>Let’s go back to our previous outlier example, but now applying a trim of 10% in both ends of the data.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> [1]   1   2   2   3   3   3   4   5   5   5 100</code></pre>
</div>
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:right;"> trimmed </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 3.555556 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>That is the same as applying a simple arithmetic mean to:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 2 3 3 3 4 5 5 5</code></pre>
</div>
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:right;"> arithmetic </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 3.555556 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>As the data is trimmed, we achieve a more representative metric for our data, but this is due to an intentional loss of information, which may result in an incomplete representation of the data’s full range. Important insights or trends within the data may be overlooked depending on the extent of trimming.</p>
</section>
</section>
<section id="when-averages-go-proportional" class="level1">
<h1><strong>When Averages Go Proportional</strong></h1>
<p>The geometric mean is a statistical measure used to determine the central tendency of a set of values, particularly when those values are multiplicatively related.</p>
<p>The geometric mean, as opposed to the arithmetic mean, involves multiplying the values and then taking the <span class="math inline">\(n\)</span>th root, where <span class="math inline">\(n\)</span> is the total number of values. This makes it especially useful for data with exponential or multiplicative growth, such as investment returns, population growth rates, or scientific measurements.</p>
<p><span id="eq-geometric"><span class="math display">\[
\sqrt[n]{\prod_\limits{i=1}^{n} x_i},
\tag{5}\]</span></span></p>
<p>where:</p>
<ul>
<li><span class="math inline">\(x_i\)</span> is a numeric vector of length <span class="math inline">\(n\)</span>.</li>
</ul>
<p>Another way to write the <a href="#eq-geometric">Equation&nbsp;5</a> is:</p>
<p><span id="eq-geometric-log"><span class="math display">\[
\begin{align}
\sqrt[n]{\prod_\limits{i=1}^{n} x_i}
&amp;= \sqrt[n]{x_1x_2...x_n} \\
&amp;= (x_1x_2...x_n)^{1/n} \\
&amp;= \mathcal{e}^{\mathcal{ln}(x_1x_2...x_n)^{1/n}}\\
&amp;= \mathcal{e}^{\frac{1}{n}[\mathcal{ln}(x_1)+\mathcal{ln}(x_2)...+\mathcal{ln}(x_n) ]}\\
&amp;= \mathcal{e}^{\frac{1}{n}\sum_\limits{i=1}^{n}\mathcal{ln}(x_i)}.
\end{align}
\tag{6}\]</span></span></p>
<p>So we can see that the geometric mean can be written as the exponential of the simple arithmetic mean (<a href="#eq-arithmetic">Equation&nbsp;1</a>) of the logarithmic of <span class="math inline">\(x_i\)</span>.</p>
<hr>
<dl>
<dt><strong><em>Logarithmic scale</em></strong></dt>
<dd>
<p><a href="https://vbfelix.github.io/posts/0003-log-scale/"><em>If you’re unfamiliar with the logarithmic function and its functions, check out our introduction post about it.</em></a></p>
</dd>
</dl>
<hr>
<p>Let’s go back to our first example and see in comparison to the arithmetic mean.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 2 2 3 3 3 4 5 5 5 7</code></pre>
</div>
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:right;"> arithmetic </th>
   <th style="text-align:right;"> geometric </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 3.636364 </td>
   <td style="text-align:right;"> 3.213991 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>We can see that the geometric mean yields a slightly lower value. When using the geometric mean with fractional values, the result represents the <em>“average growth factor”</em> between the values. It indicates the factor by which you need to multiply each value to obtain the overall product.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.100 0.200 0.300 0.050 0.004</code></pre>
</div>
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:right;"> arithmetic </th>
   <th style="text-align:right;"> geometric </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 0.1308 </td>
   <td style="text-align:right;"> 0.0654389 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<section id="ex.-1-small-but-savage-1" class="level2">
<h2 class="anchored" data-anchor-id="ex.-1-small-but-savage-1"><strong>Ex. 1:</strong> Small but savage</h2>
<p>The geometric mean is sensitive to small values in the dataset. This sensitivity can be advantageous when you want to emphasize the impact of small values or identify trends that might be overshadowed by larger values.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.1 2.0 2.0 3.0 3.0 3.0 4.0 5.0 5.0 5.0 7.0</code></pre>
</div>
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:right;"> arithmetic </th>
   <th style="text-align:right;"> geometric </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 3.554546 </td>
   <td style="text-align:right;"> 2.606968 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>As we can see, the presence of the smaller value severely “<em>penalizes”</em> the geometric value.</p>
</section>
<section id="ex.-2-when-numbers-go-big-1" class="level2">
<h2 class="anchored" data-anchor-id="ex.-2-when-numbers-go-big-1"><strong>Ex. 2:</strong> When numbers go big</h2>
<p>Unlike the arithmetic mean, the geometric mean is less affected by larger outliers. This is due to the fact that the geometric mean is equivalent to taking the arithmetic mean of the logarithms of the values. This property has the effect of compressing the data, making extreme values contribute less to the final result.</p>
<p>Let’s go back to our outlier example.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> [1]   1   2   2   3   3   3   4   5   5   5 100</code></pre>
</div>
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:right;"> arithmetic </th>
   <th style="text-align:right;"> geometric </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 12.09091 </td>
   <td style="text-align:right;"> 4.092944 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>As we can see, the geometric mean has a significant less impact of the larger value.</p>
</section>
<section id="ex.-3-may-not-reflect-true-center-1" class="level2">
<h2 class="anchored" data-anchor-id="ex.-3-may-not-reflect-true-center-1"><strong>Ex. 3:</strong> May not reflect true center</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>In this scenario, the geometric mean approaches the peak value of the density in the example because it is more resistant to larger values and more sensitive to smaller data.</p>
</section>
<section id="ex.-4-zero-gravity-when-means-gets-lost-in-space-1" class="level2">
<h2 class="anchored" data-anchor-id="ex.-4-zero-gravity-when-means-gets-lost-in-space-1"><strong>Ex. 4:</strong> Zero gravity, when means gets lost in space</h2>
<p>When a zero value is present in a dataset, calculating the geometric mean becomes problematic because the value will always be zero, since it is the product of values.</p>
<p>But let’s take a look in our previous example where the data follows a normal distribution around zero.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The geometric mean results in value larger than zero, that is because it does not consider negative values, because a negative number raised to a non-integer exponent can produce complex results, the concept of a geometric mean for negative values is meaningless in the realm of real numbers.</p>
</section>
<section id="ex.-5-a-tale-of-average-and-variance-1" class="level2">
<h2 class="anchored" data-anchor-id="ex.-5-a-tale-of-average-and-variance-1"><strong>Ex. 5:</strong> A Tale of average and variance</h2>
<p>Let’s run the normal distribution again, but this time with different variances.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We get a similar result, but in the higher variance distribution, the mean becomes more skewed toward the peak density.</p>
</section>
</section>
<section id="the-odd-one-out-in-the-mean-squad" class="level1">
<h1><strong>The Odd One Out in the Mean Squad</strong></h1>
<p>The harmonic mean is a statistical measure of central tendency used to calculate the average of a set of values when their reciprocal (inverses) is more important than their arithmetic mean.</p>
<p><span id="eq-harmonic"><span class="math display">\[
\frac{n}{\sum_\limits{i=1}^{n}\frac{1}{x_i}},
\tag{7}\]</span></span></p>
<p>where:</p>
<ul>
<li><span class="math inline">\(x_i\)</span> is a numeric vector of length <span class="math inline">\(n\)</span>.</li>
</ul>
<p>Let’s compare it to the other approaches.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 2 2 3 3 3 4 5 5 5 7</code></pre>
</div>
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:right;"> arithmetic </th>
   <th style="text-align:right;"> geometric </th>
   <th style="text-align:right;"> harmonic </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 3.636364 </td>
   <td style="text-align:right;"> 3.213991 </td>
   <td style="text-align:right;"> 2.75492 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>We can see that harmonic provided a smaller value to our fist example.</p>
<section id="ex.-1-small-but-savage-2" class="level2">
<h2 class="anchored" data-anchor-id="ex.-1-small-but-savage-2"><strong>Ex. 1:</strong> Small but savage</h2>
<p>Since the harmonic mean takes the inverse of the original value, it is even more sensitive to small values than the geometric mean, leading to extremely large results for values close to zero.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.1 2.0 2.0 3.0 3.0 3.0 4.0 5.0 5.0 5.0 7.0</code></pre>
</div>
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:right;"> arithmetic </th>
   <th style="text-align:right;"> geometric </th>
   <th style="text-align:right;"> harmonic </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 3.554546 </td>
   <td style="text-align:right;"> 2.606968 </td>
   <td style="text-align:right;"> 0.846619 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="ex.-2-when-numbers-go-big-2" class="level2">
<h2 class="anchored" data-anchor-id="ex.-2-when-numbers-go-big-2"><strong>Ex. 2:</strong> When numbers go big</h2>
<p>Next, we see how it is impacted by a larger value.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> [1]   1   2   2   3   3   3   4   5   5   5 100</code></pre>
</div>
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:right;"> arithmetic </th>
   <th style="text-align:right;"> geometric </th>
   <th style="text-align:right;"> harmonic </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 12.09091 </td>
   <td style="text-align:right;"> 4.092944 </td>
   <td style="text-align:right;"> 2.849741 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>At the same time that it is most sensitive to small values, it is also the most robust to larger values.</p>
</section>
<section id="ex.-3-may-not-reflect-true-center-2" class="level2">
<h2 class="anchored" data-anchor-id="ex.-3-may-not-reflect-true-center-2"><strong>Ex. 3:</strong> May not reflect true center</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Because the harmonic mean is more robust to larger values and more sensitive to smaller data, it provides a lower value in the example above than the other methods.</p>
</section>
<section id="ex.-4-zero-gravity-when-means-gets-lost-in-space-2" class="level2">
<h2 class="anchored" data-anchor-id="ex.-4-zero-gravity-when-means-gets-lost-in-space-2"><strong>Ex. 4:</strong> Zero gravity, when means gets lost in space</h2>
<p>Calculating the harmonic mean when there is a zero value in a dataset becomes difficult because the value is undefined since it is the sum of the inverse of the values and there is no division by zero.</p>
<p>But let’s take a look in our previous example where the data follows a normal distribution around zero.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Because we are using a dataset with a small magnitude, the harmonic mean provides a value that is even further away from the center than the geometric mean.</p>
</section>
<section id="ex.-5-a-tale-of-average-and-variance-2" class="level2">
<h2 class="anchored" data-anchor-id="ex.-5-a-tale-of-average-and-variance-2"><strong>Ex. 5:</strong> A tale of average and variance</h2>
<p>Let’s run the normal distribution again, but this time with different variances.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The harmonic mean achieves nearly the same result as the arithmetic mean, where the metrics are all centered around 50 when the variance is ignored.</p>
</section>
</section>
<section id="time-travelers-guide" class="level1">
<h1><strong>Time Travelers’ Guide</strong></h1>
<p>In time series we can have some special patterns in data, the two most common are trends, which represent long-term consistent movements in data, whether upward, downward, or flat, and seasonality, which refers to recurring and predictable patterns that repeat at regular intervals, linked to specific calendar periods.</p>
<div class="cell">

</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>When the mean is applied to the entire period, the result can be meaningless. So, how do we arrive at a representative metric?</p>
<p>A moving average is a statistical technique used to smooth out fluctuations in time series or sequential data by averaging a subset of data points within a moving window. It reduces noise to reveal underlying trends and patterns, and it is available in a variety of forms, including the simple moving average, weighted moving average, and exponential moving average.</p>
<p>To use the moving average, we must first define the interval over which the average will be calculated; in the example below, we will first display the moving average for each 10 units of time.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The moving average can improve data smoothing, noise reduction, and trend identification by highlighting underlying patterns by averaging subsets of data points. However, due to the equal weighting of all data points, it introduces a lag in detecting rapid changes, is sensitive to window size, and may not accurately capture recent trends.</p>
<p>While moving averages are effective for regular patterns, they may be ineffective for irregular data or abrupt shifts, potentially leading to oversimplification and loss of detail in the analysis. Because of the lag in detecting rapid changes and the potential impact of outliers, the moving average type and window size should be chosen based on data characteristics and analysis objectives.</p>
</section>
<section id="how-to-apply-in-r" class="level1">
<h1>How to apply in R</h1>
<p>In R we have the <code>mean</code> function that compute the simple arithmetic mean, and also we have the <code>trim</code> argument to compute the trimmed arithmetic mean. Also we have the <code>weighted.mean</code> where we can pass the weights in the <code>w</code> argument to compute the weighted arithmetic mean.</p>
<p>However, there is no native way to compute the geometric or hamonic means, so <a href="https://vbfelix.github.io/relper/articles/functions_calc.html#calc_mean">I created a function in my package relper that encompasses all possibilities</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(.<span class="dv">001</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">70</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#simple arithmetic mean </span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>relper<span class="sc">::</span><span class="fu">calc_mean</span>(<span class="at">x =</span> x,<span class="at">type =</span> <span class="st">"arithmetic"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7.375063</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#weighted arithmetic mean </span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>relper<span class="sc">::</span><span class="fu">calc_mean</span>(<span class="at">x =</span> x,<span class="at">type =</span> <span class="st">"arithmetic"</span>,<span class="at">weight =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11.72795</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#trimmed arithmetic mean </span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>relper<span class="sc">::</span><span class="fu">calc_mean</span>(<span class="at">x =</span> x,<span class="at">type =</span> <span class="st">"arithmetic"</span>,<span class="at">trim =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#geometric mean </span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>relper<span class="sc">::</span><span class="fu">calc_mean</span>(<span class="at">x =</span> x,<span class="at">type =</span> <span class="st">"geometric"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.339696</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#trimmed geometric mean </span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>relper<span class="sc">::</span><span class="fu">calc_mean</span>(<span class="at">x =</span> x,<span class="at">type =</span> <span class="st">"geometric"</span>,<span class="at">trim =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.565205</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#harmonic mean </span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>relper<span class="sc">::</span><span class="fu">calc_mean</span>(<span class="at">x =</span> x,<span class="at">type =</span> <span class="st">"harmonic"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.01592466</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">#trimmed harmonic mean </span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>relper<span class="sc">::</span><span class="fu">calc_mean</span>(<span class="at">x =</span> x,<span class="at">type =</span> <span class="st">"harmonic"</span>,<span class="at">trim =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.529412</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Blog made with <a href="https://quarto.org/">Quarto</a>, by <a href="https://github.com/vbfelix/vbfelix.github.io">Vinícius Félix</a>. License: <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC BY-SA 2.0</a>.</div>   
  </div>
</footer>



</body></html>