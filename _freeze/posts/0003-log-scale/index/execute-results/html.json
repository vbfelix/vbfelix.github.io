{
  "hash": "b1d8bfb5e7bf93d66637656a8d3a21a0",
  "result": {
    "markdown": "---\ntitle: \"An intro to: Logarithmic Scale\"\nauthor: \"Vinícius Félix\"\ndate: \"2023-01-07\"\ncategories: [Intro to, DataViz, Theory]\nimage: \"intro-to-log-scale.png\"\nbibliography: references.bib\n---\n\n\nIn this post you will learn how to go beyond linear.\n\n\n::: {.cell}\n\n:::\n\n\n# Context\n\n## Exponentiation\n\nWhen learning math, we usually start by the fundamental arithmetic operations:\n\n-   Addiction and Subtraction;\n\n-   Multiplication and Division.\n\nAfter the basics, the next step is the exponentiation, which is essentially a two-number math operation, where:\n\n-   $b$ is the base, the value that will be exponentiated;\n\n-   $n$ is the exponent, the value that the base will be raised by the power of.\n\nThen, we say that $b$ is raised to the power of $n$, meaning that:\n\n$$\nb^n = b_{[1]} \\times b_{[2]} \\times ... \\times b_{[n-1]} \\times b_{[n]} = x, \\quad n \\in \\mathbb{Z}^{++}. \n$$ {#eq-exp}\n\nAs stated in the @eq-exp, $b$ is multiplied by itself $n$ times, and this property of the exponentiation is given for any positive integer $n$.\n\nSo, let's say we want to exponentiate the number 10 to the power of 3, that is:\n\n$$\n10^3 = 10\\times 10 \\times 10 = 100 \\times 10 = 1000.\n$$ {#eq-10-power-3}\n\nIn the example above, 3 is the exponent and 10 is the base, resulting in 1,000.\n\nNext, let's understand how the exponential function works in general. For the first scenario, we will use 3 exponents (2, 3 and 4) applied to a sequence of bases from -1 to 1.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\nLooking at the figure above we can see some interesting behaviors:\n\n-   $b^n = 0$ when $b = 0$;\n-   $b^n = 1$ when $b = 1$, for all $n$;\n-   $b^n = 1$ when $b = -1$ and $n$ is even;\n-   $b^n = -1$ when $b = -1$ and $n$ is odd;\n-   $b^n > 0$ when $n$ is even, since multiplying a negative value for an even number of times yields a positive result;\n-   $b^n > b$ when $1 > b > 0$, to help our visualization of this behavior, we will plot a identity line dashed with the color red, i.e., $b^n = b$.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nWe see that the values are below the line for positives bases, hence:\n\n$$\n1 >  b > 0  \\longrightarrow b^n > b, \\quad n \\in \\mathbb{Z}^{++}.\n$$ {#eq-exp-frac-base}\n\nBut let's keep in mind that until now we worked with bases between -1 and 1, will see how the exponentiation behavior for $b >= 1$ next.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nLooking at values \\> 1 for our base, we see how fast the results of $b^n$ grows for a higher $n$.\n\nAfter seeing how the behavior is for differents bases, we will do the same for the exponents. As we applied integer positive values for our exponents in the examples before, let's see how fractional exponents behavior.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nWe can see that for negatives values of $b$ there are not defined values of $b^n$, but why is that?\n\n$$\nb^{\\frac{n}{m}} = (b^n)^{\\frac{1}{m}} = \\sqrt[m]{b^n}.\n$$ {#eq-exp-n-m}\n\nIn the @eq-exp-n-m we look how a fractional exponent is actually the $m$*th* root of $b^n$, so if $m$ is even, there would be no real solution, since a even root of a negative value is not defined for real numbers.\n\nAfter understanding the basics of the the exponentiation we can jump to the inverse operation, the logarithm ($\\log$).\n\n## Logarithm\n\nSo, let's see how $\\log$ works, since it is the inverse of the exponentiation, we can write it as:\n\n$$\n\\log_b(x) = n \\longleftrightarrow b^n = x.\n$$ {#eq-log-formula}\n\nAs stated in the equation above, the $\\log$ function gives what is the exponent ($n$) we have to raise our base ($b$) to result in $x$.\n\nApplying this logic, we can see the @eq-10-power-3 as:\n\n$$\n\\log_{10}(1000) = 3.\n$$ {#eq-log-10-1000}\n\nSo the $\\log$ is which number 10 has to be exponiented to result in 1,000, then we can easily expand this to show other results:\n\n| $\\log_{10}(x)$ | $x$     |\n|----------------|---------|\n| -5             | 0.00001 |\n| -4             | 0.0001  |\n| -3             | 0.001   |\n| -2             | 0.01    |\n| -1             | 0.1     |\n| 0              | 1       |\n| 1              | 10      |\n| 2              | 100     |\n| 3              | 1000    |\n| 4              | 10,000  |\n| 5              | 100,000 |\n\n: {tbl-colwidths=\"\\[25,25\\]\"}\n\nIn the table above we see thjat the result of the $\\log_{10}(x)$ increase 1 unit as the value in $x$ is multiplied by 10. This is a very helpful property, that will explore more later.\n\nJust as we did with the exponentiation, let's see how the $\\log$ behavior, so we will apply the function to a $x$ varying from -1 to 11 with three different bases (2, $\\mathcal{e}$ and 10).\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nLooking at the figure above we can see some interesting behaviors:\n\n-   $n$ is nonexistent when $x < 0$, as we saw earlier for somes cases in the exponentiation would result in a undefined number;\n-   $n$ is equal to 1 when $x = b$;\n-   $n$ is equal to 0 when $x = 1$;\n-   $n$ is negative when $x < 1$.\n\nBefore exploring more of the logarithm properties, you can be asking what it is the $\\mathcal{e}$ used in the example before?\n\n### Natural logarithm\n\nThis logarithm is a special case, where the base of the $\\log$ is the number $\\mathcal{e}$, also known as Euler's number or Napier's constant, defined by:\n\n$$\n\\mathcal{e} = \\sum_{n = 0}^{\\infty}\\frac{1}{n!} = \\frac{1}{1} + \\frac{1}{1\\times2}+ \\frac{1}{1\\times2\\times3} + ... \\approx 2.718282.\n$$ {#eq-euler-number}\n\nSo the natural logarithm can be written as:\n\n$$\n\\log_{\\mathcal{e}}(x) = \\mathrm{ln}(x).\n$$ {#eq-natural-log}\n\n### Properties\n\nThe $\\log$ function has many properties that helps us in many situations, let's see the main properties.\n\n#### Product\n\nThe first property is that the $\\log$ of the products of $x$ and $y$ is the same as the sum of the $\\log$'s of $x$ and $y$, that is:\n\n$$\n\\log_b(xy) = \\log_b(x) + \\log_b(y).\n$$ {#eq-log-product}\n\nTo see that, let's use the @eq-log-formula and define a second logarithm as:\n\n$$\n\\log_b(y) = m \\longleftrightarrow y = b^m.\n$$ {#eq-log-y-exp}\n\nBy applying the product property of the exponentiation we have that:\n\n$$\nxy = b^n \\ b^ m = b^{(n+m)}.\n$$ {#eq-exp-product}\n\nNow, if we apply the @eq-exp-product in the @eq-log-product, our result is:\n\n$$\n\\begin{align}\n\\log_b(xy)\n&= \\log_b(b^{(n + m)}) \\\\\n&= n + m \\\\\n&= \\log_b(x) + \\log_b(y).\n\\end{align}\n$$ {#eq-log-product-proof}\n\n#### Quotient\n\nThe second property is that the $\\log$ of the division of $x$ and $y$ is the same as the subtraction of the $\\log$'s of $x$ and $y$, that is:\n\n$$\n\\log_b\\left(\\frac{x}{y}\\right) = \\log_b(x) - \\log_b(y).\n$$ {#eq-log-quotient}\n\nUsing the same definitions of @eq-log-formula and @eq-log-y-exp, we have that:\n\n$$\n\\frac{x}{y} = \\frac{b^n}{b^m} = b^{n-m}, \n$$ {#eq-exp-quotient}\n\nif we aplly the @eq-exp-quotient in the @eq-log-quotient, our result is:\n\n$$\n\\begin{align}\n\\log_b\\left(\\frac{x}{y}\\right)\n&= \\log_b(b^{n-m}) \\\\\n&= n-m \\\\\n&= \\log_b(x) - \\log_b(y).\n\\end{align}\n$$ {#eq-exp-quotient-proof}\n\n#### Power\n\nThe third property is that the $\\log$ of a value $x$ raised by a power $a$, is equal to the product of $a$ times the $\\log$ of $x$.\n\n$$\n\\log_b(x^a) = a\\log_b(x).\n$$ {#eq-log-power}\n\nExpanding the definition in @eq-log-formula:\n\n$$\n\\log_b(x) = n \\longrightarrow x = b^n \\longrightarrow x^a = (b^{n})^a = b^{an},\n$$ {#eq-log-x-exp-a}\n\nNow, if we use the definition in the @eq-log-power, we have that:\n\n$$\n\\begin{align}\n\\log_b(x^a)\n&= \\log_b(b^{an}) \\\\\n&= an \\\\\n&= a\\log_b(x).\n\\end{align}\n$$ {#eq-exp-power-proof}\n\n# Data Visualization\n\nFinally, we will see an application of the $\\log$ scale directly to data visualization, first we will see how those math properties appears in a graph.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nSince the $\\log$ is the inverse of the exponentation, we show here in this graph where we plot the cumulative product of a vector of size 5 with number 10 in the x axis versus the respective logarithm, with base 10, in the y axis.\n\nIn the x axis as the data multiple by 10 the result of the $\\log$ increase by 1 in the y axis. This property make it easier to showcase data that:\n\n-   Have a multiplicative effect;\n-   Outliers;\n-   Groups with different magnitudes.\n\nLet's see a simple example of how the change in scale can easily modify our perspective.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nIn the figure above we just apply the $\\log_e$ in a sequence from 1 to 10, we see in the x axis (linear scale) that the distance between the values are equidistant, but for the y axis the distances shorten for higher values, the reasoning for that is because the result of the $\\log$ is the exponent to reach that specific value $x$, so different from addition, a minimal increase can cause a major difference in our result.\n\nWith that, the effect of a minimal increase in the exponent has a huge implication in the resultant values, for example, going from 1 to 2 requires a 0.69 unit increase in the exponent, but to go from 9 to 10 required a difference of just 0.10 in the exponent.\n\nSo the $\\log$ scale can be very helpful to \"*compress*\" data with a huge magnitude, making possible to see behaviors that were \"*squished*\" by the linear scale.\n\n## Real data application\n\nWe will look at the number of deaths from COVID--19 [@guidotti2020] of Argentina (ARG), Brazil (BRA) and the United States of America (USA), in 2020.\n\nAs a disclaimer, the goal of this analysis is to demonstrate how the logarithm can be useful, not to gain any insight into how COVID actually behaved in these countries, as that would necessitate more in-depth research.\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\nLooking at the figure above we see that number of deaths are bigger in USA, Brazil and lastly Argentina, that is no surprise since it follows the same order of population size.\n\nSo if we want to compare the behavior of the countries it can be hard, for example, Argentina has less deaths and the curve become \"*squished*\", making it hard to see what really happened.\n\nSince we have data with different magnitudes, we can apply the logarithm.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\nAfter the application of the $\\log_10$, we can see each country's behavior more clearly. For example, the number of deaths in the United States began earlier and slowed down faster than in Brazil, whereas Argentina had a steady number of deaths until November, when it began to \"*stabilize*\".\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}